<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Air Fingerprint Dashboard</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<h1>ðŸŒ¿ Air Fingerprint Dashboard ðŸŒ¿</h1>

<div class="dashboard">
  <div class="card">
    <h2>Air Quality</h2>
    <div class="value" id="air">--</div>
  </div>
  <div class="card">
    <h2>Temperature (Â°C)</h2>
    <div class="value" id="temp">--</div>
  </div>
  <div class="card">
    <h2>Humidity (%)</h2>
    <div class="value" id="hum">--</div>
  </div>
  <div class="card">
    <h2>Noise Level</h2>
    <div class="value" id="noise">--</div>
  </div>
</div>

<footer>
  &copy; 2025 Air Fingerprint Project
</footer>

<script>
async function fetchData() {
  try {
    const channelId = 3126084; // ThingSpeak Channel ID

    const mqRes = await fetch(`https://api.thingspeak.com/channels/${channelId}/fields/1.json?results=1`);
    const tempRes = await fetch(`https://api.thingspeak.com/channels/${channelId}/fields/2.json?results=1`);
    const humRes = await fetch(`https://api.thingspeak.com/channels/${channelId}/fields/3.json?results=1`);
    const noiseRes = await fetch(`https://api.thingspeak.com/channels/${channelId}/fields/4.json?results=1`);

    const mqData = await mqRes.json();
    const tempData = await tempRes.json();
    const humData = await humRes.json();
    const noiseData = await noiseRes.json();

    const mqValue = mqData.feeds[0].field1;
    const tempValue = tempData.feeds[0].field2;
    const humValue = humData.feeds[0].field3;
    const noiseValue = noiseData.feeds[0].field4;

    // Determine air quality status
    let airStatus = "GOOD";
    if (mqValue > 700) airStatus = "POOR";
    else if (mqValue > 400) airStatus = "MODERATE";

    // Update HTML
    document.getElementById("air").innerText = airStatus;
    document.getElementById("air").className = `value ${airStatus}`;
    document.getElementById("temp").innerText = tempValue || "--";
    document.getElementById("hum").innerText = humValue || "--";
    document.getElementById("noise").innerText = noiseValue == 1 ? "HIGH" : "LOW";

  } catch (err) {
    console.error(err);
  }
}

// Initial fetch and set interval
fetchData();
setInterval(fetchData, 20000);
</script>

</body>
</html>
